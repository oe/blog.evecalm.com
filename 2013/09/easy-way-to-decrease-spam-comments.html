<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="夏影の博客"><title>[建站]博客网站减少垃圾留言的简单办法 - 夏影の博客</title><meta name="author" content="Saiya"><link rel="icon" href="https://blog.evecalm.com/assets/images/favicon.png"><link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Saiya","sameAs":["https://github.com/oe"],"image":"//evecalm.com/assets/avatar.jpg"},"articleBody":"现在流行的博客程序有wordpress，zblog，typecho等等，使用这些流行的程序搭建网站快速方便，但是垃圾留言也同样随之而来。每天查看和清理成百上千条垃圾评论总是一件让人头疼的事情，虽然有垃圾评论检测插件（如wordpress下的Akismet），但不是能百分百检测正确，总有漏网之鱼，也有被误判的，所以即使使用了垃圾评论检测插件，评论队列（包括垃圾评论队列）还是得仔细看一遍。\n那么，有没有什么好办法减少甚至完全屏蔽掉垃圾评论呢？这先得从垃圾评论的留言机制上说起。\n流行的博客程序都有良好的内部结构，功能模块分的都很清晰。例如有专门负责输出rss的文件，专门负责处理提交的评论的文件等等，这些文件相对于网站的位置都是固定的，并且评论表单中用来标识昵称、邮箱及网站输入框的名称都一样！一般提交一条评论所需要的数据除了昵称、邮箱、网站地址及评论外，还需要知道文章的ID，以及这些数据提交到什么地方。而通过以上介绍，只要知道了你网站地址及博客程序类型，就知道了评论表单中几个输入框的标识名称，RSS的地址（wordpress的是http://域名/feed）也知道了，通过解析网站的rss就知道了文章ID，这些数据要提交到的地方当然就是处理评论的文件的地址（wordpress的是http://域名/wp-comments-post.php）了。所以知道了这些发送一条评论就够了，根本无需打开你的文章页面，甚至无需打开浏览器！对于使用C++、.Net编写的刷评论软件，一分钟刷个上百条评论是没有问题的。由于wordpress在全球范围内非常流行，所以使用wordpress搭建的博客经常会有英文、日文、俄文等外文垃圾留言的光顾。\n现在，既然知道了垃圾评论的留言机制，那就可以对症下药了！最简单的办法就是让刷评论的软件找不到评论的提交地址！步骤如下:\n\n将网站根目录下的wp-comments-post.php文件复制一份，随便改一个名字（如abc.php），文件后缀不能改。\n\n修改wp-comments-post.php文件，在文件第一行&amp;lt;?php 后换行插入如下代码:\n\n\ndie();\n\n修改当前主题的comments.php文件，该文件位置在[网站根目录]/wp-content/themes/[主题名],在该文件中找到wp-comments-post.php，将其改成第一步改后的那个名字（这里就是abc.php了）。\n\n使用改方法能屏蔽掉大部分的垃圾评论。需要注意的是wordpress升级会在网站根目录下再次生成wp-comments-post.php文件，升级后需要将步骤1和2重新操作一遍；切换主题后应按步骤3操作一遍。\n","dateCreated":"2013-09-01T07:42:21+00:00","dateModified":"2022-02-13T10:05:27+00:00","datePublished":"2013-09-01T07:42:21+00:00","description":"现在流行的博客程序有wordpress，zblog，typecho等等，使用这些流行的程序搭建网站快速方便，但是垃圾留言也同样随之而来。每天查看和清理成百上千条垃圾评论总是一件让人头疼的事情，虽然有垃圾评论检测插件（如wordpress下的Akismet），但不是能百分百检测正确，总有漏网之鱼，也有被误判的，所以即使使用了垃圾评论检测插件，评论队列（包括垃圾评论队列）还是得仔细看一遍。 那么，有没...","headline":"[建站]博客网站减少垃圾留言的简单办法","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html"},"publisher":{"@type":"Organization","name":"Saiya","sameAs":["https://github.com/oe"],"image":"//evecalm.com/assets/avatar.jpg","logo":{"@type":"ImageObject","url":"//evecalm.com/assets/avatar.jpg"}},"url":"https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html","keywords":"技巧, 网站, 垃圾留言"}</script><meta name="description" content="现在流行的博客程序有wordpress，zblog，typecho等等，使用这些流行的程序搭建网站快速方便，但是垃圾留言也同样随之而来。每天查看和清理成百上千条垃圾评论总是一件让人头疼的事情，虽然有垃圾评论检测插件（如wordpress下的Akismet），但不是能百分百检测正确，总有漏网之鱼，也有被误判的，所以即使使用了垃圾评论检测插件，评论队列（包括垃圾评论队列）还是得仔细看一遍。 那么，有没"><meta property="og:type" content="blog"><meta property="og:title" content="[建站]博客网站减少垃圾留言的简单办法"><meta property="og:url" content="https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html"><meta property="og:site_name" content="夏影の博客"><meta property="og:description" content="现在流行的博客程序有wordpress，zblog，typecho等等，使用这些流行的程序搭建网站快速方便，但是垃圾留言也同样随之而来。每天查看和清理成百上千条垃圾评论总是一件让人头疼的事情，虽然有垃圾评论检测插件（如wordpress下的Akismet），但不是能百分百检测正确，总有漏网之鱼，也有被误判的，所以即使使用了垃圾评论检测插件，评论队列（包括垃圾评论队列）还是得仔细看一遍。 那么，有没"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2013-09-01T07:42:21.000Z"><meta property="article:modified_time" content="2022-02-13T10:05:27.965Z"><meta property="article:author" content="Saiya"><meta property="article:tag" content="技巧"><meta property="article:tag" content="网站"><meta property="article:tag" content="垃圾留言"><meta name="twitter:card" content="summary"><meta property="og:image" content="//evecalm.com/assets/avatar.jpg"><link rel="stylesheet" href="/assets/css/style-ft2srw7qp8ticpezn4vlep49rxq5p411zv1poeiw6oqx5nvds3syaav08esz.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-23144132-1"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-23144132-1');</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.1.1/css/all.min.css" integrity="sha512-ioRJH7yXnyX+7fXTQEKPULWkMn3CqMcapK0NNtCN8q//sW7ZeVFcbMJ9RvX99TwDg6P8rAH2IqUSt2TLab4Xmw==" crossorigin="anonymous" referrerpolicy="no-referrer" media="print" onload="this.media='all'"></head><body><div id="blog"><header id="header" data-behavior="5"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">夏影の博客</a></div><a class="header-right-picture" href="#about" aria-label="打开链接: /#about"><img class="header-picture" src="//evecalm.com/assets/avatar.jpg" alt="作者的图片"></a></header><nav id="sidebar" data-behavior="5"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="阅读有关作者的更多信息"><img class="sidebar-profile-picture" src="//evecalm.com/assets/avatar.jpg" alt="作者的图片"></a><h4 class="sidebar-profile-name">Saiya</h4><h5 class="sidebar-profile-bio"><p>with Sunny</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" rel="noopener" title="首页"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">首页</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/categories" rel="noopener" title="分类"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">分类</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/tags" rel="noopener" title="标签"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">标签</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/archives" rel="noopener" title="归档"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">归档</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://evecalm.com/about/" target="_blank" rel="noopener" title="关于"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">关于</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/oe" target="_blank" rel="noopener" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/atom.xml" rel="noopener" title="RSS"><i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i> <span class="sidebar-button-desc">RSS</span></a></li></ul></div></nav><div id="main" data-behavior="5" class="hasCoverMetaIn"><article class="post"><div class="post-header main-content-wrap text-left"><h1 class="post-title">[建站]博客网站减少垃圾留言的简单办法</h1><div class="post-meta"><time datetime="2013-09-01T07:42:21+00:00">9月 01, 2013 </time><span>发布在 </span><a class="category-link" href="/categories/%E5%BB%BA%E7%AB%99/">建站</a></div></div><div class="post-content markdown"><div class="main-content-wrap"><p>现在流行的博客程序有wordpress，zblog，typecho等等，使用这些流行的程序搭建网站快速方便，但是垃圾留言也同样随之而来。每天查看和清理成百上千条垃圾评论总是一件让人头疼的事情，虽然有垃圾评论检测插件（如wordpress下的Akismet），但不是能百分百检测正确，总有漏网之鱼，也有被误判的，所以即使使用了垃圾评论检测插件，评论队列（包括垃圾评论队列）还是得仔细看一遍。</p><p>那么，有没有什么好办法减少甚至完全屏蔽掉垃圾评论呢？这先得从垃圾评论的留言机制上说起。</p><p>流行的博客程序都有良好的内部结构，功能模块分的都很清晰。例如有专门负责输出rss的文件，专门负责处理提交的评论的文件等等，这些文件相对于网站的位置都是固定的，并且评论表单中用来标识昵称、邮箱及网站输入框的名称都一样！一般提交一条评论所需要的数据除了昵称、邮箱、网站地址及评论外，还需要知道文章的ID，以及这些数据提交到什么地方。而通过以上介绍，只要知道了你网站地址及博客程序类型，就知道了评论表单中几个输入框的标识名称，RSS的地址（wordpress的是http://域名/feed）也知道了，通过解析网站的rss就知道了文章ID，这些数据要提交到的地方当然就是处理评论的文件的地址（wordpress的是http://域名/wp-comments-post.php）了。所以知道了这些发送一条评论就够了，根本无需打开你的文章页面，甚至无需打开浏览器！对于使用C++、.Net编写的刷评论软件，一分钟刷个上百条评论是没有问题的。由于wordpress在全球范围内非常流行，所以使用wordpress搭建的博客经常会有英文、日文、俄文等外文垃圾留言的光顾。</p><p>现在，既然知道了垃圾评论的留言机制，那就可以对症下药了！最简单的办法就是让刷评论的软件找不到评论的提交地址！步骤如下:</p><ol><li><p>将网站根目录下的<code>wp-comments-post.php</code>文件复制一份，随便改一个名字（如abc.php），文件后缀不能改。</p></li><li><p>修改<code>wp-comments-post.php</code>文件，在文件第一行<code>&amp;lt;?php</code> 后换行插入如下代码:</p></li></ol><p><code>die();</code></p><ol start="3"><li>修改当前主题的<code>comments.php</code>文件，该文件位置在<code>[网站根目录]/wp-content/themes/[主题名]</code>,在该文件中找到<code>wp-comments-post.php</code>，将其改成第一步改后的那个名字（这里就是abc.php了）。</li></ol><p>使用改方法能屏蔽掉大部分的垃圾评论。需要注意的是wordpress升级会在网站根目录下再次生成<code>wp-comments-post.php</code>文件，升级后需要将步骤1和2重新操作一遍；切换主题后应按步骤3操作一遍。</p></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">标签</span><br><a class="tag tag--primary tag--small t-none-link" href="/tags/%E5%9E%83%E5%9C%BE%E7%95%99%E8%A8%80/" rel="tag">垃圾留言</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/%E6%8A%80%E5%B7%A7/" rel="tag">技巧</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/%E7%BD%91%E7%AB%99/" rel="tag">网站</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2013/11/my-webrequest.html" data-tooltip="[个人作品]Chrome扩展 My Webrequest" aria-label="上一篇: [个人作品]Chrome扩展 My Webrequest"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2013/07/blog-domain-modified.html" data-tooltip="[建站]博客域名已重定向至blog.evecalm.com" aria-label="下一篇: [建站]博客域名已重定向至blog.evecalm.com"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Facebook" aria-label="分享到 Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Weibo" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html&amp;title=[建站]博客网站减少垃圾留言的简单办法" title="分享到 QQ" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Qzone" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Kommentieren"><i class="fa fa-comment"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></article><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2022 Saiya. All Rights Reserved.</span></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="5"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2013/11/my-webrequest.html" data-tooltip="[个人作品]Chrome扩展 My Webrequest" aria-label="上一篇: [个人作品]Chrome扩展 My Webrequest"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2013/07/blog-domain-modified.html" data-tooltip="[建站]博客域名已重定向至blog.evecalm.com" aria-label="下一篇: [建站]博客域名已重定向至blog.evecalm.com"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Facebook" aria-label="分享到 Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Weibo" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html&amp;title=[建站]博客网站减少垃圾留言的简单办法" title="分享到 QQ" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" title="分享到 Qzone" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Kommentieren"><i class="fa fa-comment"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div><div id="share-options-bar" class="share-options-bar" data-behavior="5"><i id="btn-close-shareoptions" class="fa fa-times"></i><ul class="share-options"><li class="share-option"><a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" aria-label="分享到 Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html&amp;title=[建站]博客网站减少垃圾留言的简单办法" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i><span>分享到 Qzone</span></a></li></ul></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="//evecalm.com/assets/avatar.jpg" alt="作者的图片"><h4 id="about-card-name">Saiya</h4><div id="about-card-bio"><p>with Sunny</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>author.job</p></div></div></div><picture id="cover"><source srcset="/assets/images/cover.avif" type="image/avif"><source srcset="/assets/images/cover.webp" type="image/webp"><img src="/assets/images/cover.jpg" alt="Alt Text!" style="width: inherit;height: inherit;object-fit: cover;"></picture><script src="/assets/js/script-8k5vxlrhxq030ssu3l6yb28vulpwh2jtr3nvtvp8ntwfg7tsdtlovd3xrflm.min.js"></script><script>var disqus_config = function() {
            this.page.url = 'https://blog.evecalm.com/2013/09/easy-way-to-decrease-spam-comments.html';
              
            this.page.identifier = '2013/09/easy-way-to-decrease-spam-comments.html';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'kalm';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();</script></body></html>