<!DOCTYPE html><html lang="zh-Hans" class="scroll-smooth"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="/favicon.png" type="image/png"><title>[å­¦ä¹ ç¬”è®°]å¦‚ä½•è·å–å›¾ç‰‡ä¸ŠæŸä¸ªåƒç´ ç‚¹çš„é¢œè‰²å€¼ - å¤å½±ã®åšå®¢</title><link rel="alternate" type="application/rss+xml" title="å¤å½±ã®åšå®¢" href="https://blog.evecalm.com/atom.xml"><meta name="description" content="æœ€è¿‘æµè§ˆ product hunt æ—¶, å‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç½‘ç«™ color copy paste: åœ¨é¦–é¡µçš„å›¾ç‰‡ä¸Š, å¯ä»¥ç›´æ¥ç‚¹å‡»å–è‰². è¿™åˆå‹¾èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒ: åœ¨ç½‘é¡µä¸Šå¦‚ä½•å–åˆ°å›¾ç‰‡åƒç´ ç‚¹çš„é¢œè‰²å‘¢? ä¸€ç•ªæœç´¢å, å‘ç°äº†ä¸€ä¸ªç¥å¥‡çš„API: Canvas çš„ context.getImageData(x, y, width, height) å¯ç”¨äºè·å–å›¾ç‰‡çš„åƒç´ ä¿¡æ¯: ç”±ä¸Šè¿°ä¾‹å­å¯è§, ä¸€ä¸ªåƒç´ ç‚¹ç”±å››..."><meta property="og:type" content="blog"><meta property="og:title" content="[å­¦ä¹ ç¬”è®°]å¦‚ä½•è·å–å›¾ç‰‡ä¸ŠæŸä¸ªåƒç´ ç‚¹çš„é¢œè‰²å€¼"><meta property="og:url" content="https://blog.evecalm.com/2020/06/get-color-from-image/"><meta property="og:site_name" content="å¤å½±ã®åšå®¢"><meta property="og:local" content="zh-Hans"><meta property="og:description" content="æœ€è¿‘æµè§ˆ product hunt æ—¶, å‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç½‘ç«™ color copy paste: åœ¨é¦–é¡µçš„å›¾ç‰‡ä¸Š, å¯ä»¥ç›´æ¥ç‚¹å‡»å–è‰². è¿™åˆå‹¾èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒ: åœ¨ç½‘é¡µä¸Šå¦‚ä½•å–åˆ°å›¾ç‰‡åƒç´ ç‚¹çš„é¢œè‰²å‘¢? ä¸€ç•ªæœç´¢å, å‘ç°äº†ä¸€ä¸ªç¥å¥‡çš„API: Canvas çš„ context.getImageData(x, y, width, height) å¯ç”¨äºè·å–å›¾ç‰‡çš„åƒç´ ä¿¡æ¯: ç”±ä¸Šè¿°ä¾‹å­å¯è§, ä¸€ä¸ªåƒç´ ç‚¹ç”±å››..."><meta property="og:image" content="//evecalm.com/assets/avatar.jpg"><meta property="article:author" content="Saiya"><link rel="canonical" href="https://blog.evecalm.com/2020/06/get-color-from-image/"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CMTcOisY.js"></script><link rel="stylesheet" href="/_astro/_pageList_.DcGXk42y.css">
<style>@charset "UTF-8";article h1,article h2,article h3,article h4,article h5,article h6{position:relative}article h1 .icon-link,article h2 .icon-link,article h3 .icon-link,article h4 .icon-link,article h5 .icon-link,article h6 .icon-link{position:absolute;left:-1em;opacity:0}article h1 .icon-link:after,article h2 .icon-link:after,article h3 .icon-link:after,article h4 .icon-link:after,article h5 .icon-link:after,article h6 .icon-link:after{content:"ğŸ”—";font-size:.6em}article h1:hover .icon-link,article h2:hover .icon-link,article h3:hover .icon-link,article h4:hover .icon-link,article h5:hover .icon-link,article h6:hover .icon-link{opacity:1}.post-title{margin-bottom:.2em}
</style><style>[data-astro-transition-scope="astro-zc5qi7ok-1"] { view-transition-name: archived_2f\77E5\8BC6\5206\4EAB_2f_5b\5B66\4E60\7B14\8BB0_5d\5982\4F55\83B7\53D6\56FE\7247\4E0A\67D0\4E2A\50CF\7D20\70B9\7684\989C\8272\503C_2emd; }@layer astro { ::view-transition-old(archived_2f\77E5\8BC6\5206\4EAB_2f_5b\5B66\4E60\7B14\8BB0_5d\5982\4F55\83B7\53D6\56FE\7247\4E0A\67D0\4E2A\50CF\7D20\70B9\7684\989C\8272\503C_2emd) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(archived_2f\77E5\8BC6\5206\4EAB_2f_5b\5B66\4E60\7B14\8BB0_5d\5982\4F55\83B7\53D6\56FE\7247\4E0A\67D0\4E2A\50CF\7D20\70B9\7684\989C\8272\503C_2emd) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(archived_2f\77E5\8BC6\5206\4EAB_2f_5b\5B66\4E60\7B14\8BB0_5d\5982\4F55\83B7\53D6\56FE\7247\4E0A\67D0\4E2A\50CF\7D20\70B9\7684\989C\8272\503C_2emd) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(archived_2f\77E5\8BC6\5206\4EAB_2f_5b\5B66\4E60\7B14\8BB0_5d\5982\4F55\83B7\53D6\56FE\7247\4E0A\67D0\4E2A\50CF\7D20\70B9\7684\989C\8272\503C_2emd) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-zc5qi7ok-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-zc5qi7ok-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-zc5qi7ok-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-zc5qi7ok-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-zc5qi7ok-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-zc5qi7ok-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-zc5qi7ok-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-zc5qi7ok-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-y4r3tox3-2"] { view-transition-name: header; }@layer astro { ::view-transition-old(header) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(header) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(header) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(header) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-y4r3tox3-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-y4r3tox3-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-y4r3tox3-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-y4r3tox3-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-y4r3tox3-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-y4r3tox3-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-y4r3tox3-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-y4r3tox3-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-na7s5o5k-3"] { view-transition-name: footer; }@layer astro { ::view-transition-old(footer) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(footer) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(footer) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(footer) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-na7s5o5k-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-na7s5o5k-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-na7s5o5k-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-na7s5o5k-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-na7s5o5k-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-na7s5o5k-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-na7s5o5k-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-na7s5o5k-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body class="bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-300 font-sans text-wrap break-words relative"> <div class="border-b border-slate-100 dark:border-slate-700 mb-4"> <header class="max-w-4xl flex justify-between items-center m-auto py-6 px-4 font-serif text-slate-500 dark:text-slate-400 max-xs:flex-col max-xs:gap-2"> <h1 class="text-xl"> <a href="/">å¤å½±ã®åšå®¢</a> </h1> <ul class="flex gap-4"> <li> <a href="/categories/">åˆ†ç±»</a> </li> <li> <a href="/tags/">æ ‡ç­¾</a> </li> <li> <a href="https://evecalm.com/about" target="_blank">å…³äº</a> </li> <li> <a href="/atom.xml" target="_blank" aria-label="RSS è®¢é˜…" class="hover-tip bottom"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg> </a> </li> <li> <a href="https://github.com/oe" target="_blank" aria-label="Github è´¦æˆ·" class="hover-tip bottom"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg> </a> </li> </ul> </header> </div>   <article class="format lg:format-lg max-w-4xl prose-zinc dark:format-invert mx-auto px-4 mb-4"> <h1 class="post-title" data-astro-transition-scope="astro-zc5qi7ok-1"> [å­¦ä¹ ç¬”è®°]å¦‚ä½•è·å–å›¾ç‰‡ä¸ŠæŸä¸ªåƒç´ ç‚¹çš„é¢œè‰²å€¼ </h1> <div class="text-slate-400 text-sm mb-2">2020å¹´6æœˆ22æ—¥<!-- -->å‘å¸ƒåœ¨ <a href="/categories/%E7%9F%A5%E8%AF%86%E5%88%86%E4%BA%AB/">çŸ¥è¯†åˆ†äº«</a></div> <p>æœ€è¿‘æµè§ˆ product hunt æ—¶, å‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç½‘ç«™ <a href="https://colorcopypaste.app/" rel="noopener nofollow" target="_blank">color copy paste</a>: åœ¨é¦–é¡µçš„å›¾ç‰‡ä¸Š, å¯ä»¥ç›´æ¥ç‚¹å‡»å–è‰². è¿™åˆå‹¾èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒ: åœ¨ç½‘é¡µä¸Šå¦‚ä½•å–åˆ°å›¾ç‰‡åƒç´ ç‚¹çš„é¢œè‰²å‘¢?</p>
<p>ä¸€ç•ªæœç´¢å, å‘ç°äº†ä¸€ä¸ªç¥å¥‡çš„API: Canvas çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/getImageData" rel="noopener nofollow" target="_blank"><code>context.getImageData(x, y, width, height)</code></a> å¯ç”¨äºè·å–å›¾ç‰‡çš„åƒç´ ä¿¡æ¯:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> canvas</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> document.</span><span style="color:#B392F0">createElement</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'canvas'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> context</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> canvas.</span><span style="color:#B392F0">getContext</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'2d'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6A737D">// å‡è®¾é¡µé¢å­˜åœ¨IDä¸º target-image çš„å›¾ç‰‡</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> image</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> document.</span><span style="color:#B392F0">querySelector</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'#target-image'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6A737D">// ä½¿ç”¨å›¾ç‰‡çš„åŸå§‹å®½é«˜ä½œä¸ºç”»å¸ƒçš„å®½é«˜</span></span>
<span class="line"><span style="color:#E1E4E8">canvas.width </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> image.naturalWidth</span></span>
<span class="line"><span style="color:#E1E4E8">canvas.height </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> image.naturalHeight</span></span>
<span class="line"><span style="color:#E1E4E8">context.</span><span style="color:#B392F0">drawImage</span><span style="color:#E1E4E8">(image, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// è·å–å›¾ç‰‡å·¦ä¸Šè§’ç¬¬ä¸€ä¸ªåƒç´ çš„ä¿¡æ¯</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> imageData</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> context.</span><span style="color:#B392F0">getImageData</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(imageData)</span></span>
<span class="line"><span style="color:#6A737D">// ä»¥ä¸‹ä¸ºç¤ºä¾‹è¾“å‡ºç»“æœ</span></span>
<span class="line"><span style="color:#6A737D">// {</span></span>
<span class="line"><span style="color:#6A737D">//   data: [255, 0, 0, 255], // åƒç´ ä¿¡æ¯</span></span>
<span class="line"><span style="color:#6A737D">//   height: 1,</span></span>
<span class="line"><span style="color:#6A737D">//   width: 1</span></span>
<span class="line"><span style="color:#6A737D">// }</span></span></code></pre>
<p>ç”±ä¸Šè¿°ä¾‹å­å¯è§, ä¸€ä¸ªåƒç´ ç‚¹ç”±å››ä¸ªæ•°å­—æè¿°, åˆ†åˆ«ä¸º <code>r</code> <code>g</code> <code>b</code> <code>a</code>, <code>a</code> ä¸º 255 åˆ™è¡¨ç¤ºå®Œå…¨ä¸é€æ˜å³ alpha é€šé“å€¼ä¸º 255/255 = 1.</p>
<h2 id="å¦‚ä½•è®¡ç®—å›¾ç‰‡å¹³å‡é¢œè‰²"><a aria-hidden="true" tabindex="-1" href="#å¦‚ä½•è®¡ç®—å›¾ç‰‡å¹³å‡é¢œè‰²"><span class="icon icon-link"></span></a>å¦‚ä½•è®¡ç®—å›¾ç‰‡å¹³å‡é¢œè‰²</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çŸ¥é“å›¾ç‰‡çš„å¹³å‡é¢œè‰², ç”¨äºäº§ç”Ÿå¯¹åº”çš„å ä½ç¼©ç•¥å›¾, æŠ‘æˆ–æœ‰å…¶ä»–ç›®çš„. è®¡ç®—å¹³å‡é¢œè‰²çš„æ€è·¯å¾ˆç®€å•: åˆ†åˆ«ç»Ÿè®¡æ¯ä¸ªåƒç´ ç‚¹çš„ <code>r</code> <code>g</code> <code>b</code> <code>a</code> çš„æ€»å€¼, å†é™¤ä»¥åƒç´ ä¸ªæ•°</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#6A737D">// æ¥ä¸Šè¾¹çš„ç¤ºä¾‹ä»£ç </span></span>
<span class="line"><span style="color:#F97583">...</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> imageData</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> context.</span><span style="color:#B392F0">getImageData</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, canvas.width, canvas.height)</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> imagePixelData</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> imageData.data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> pixelCount</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> imagePixelData.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> /</span><span style="color:#79B8FF"> 4</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> averRgba</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {r: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, g: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, b: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, a: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">let</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> pixelCount; </span><span style="color:#F97583">++</span><span style="color:#E1E4E8">i) {</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> idx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">*</span><span style="color:#79B8FF"> 4</span></span>
<span class="line"><span style="color:#E1E4E8">  averRgba.r </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> imagePixelData[idx]</span></span>
<span class="line"><span style="color:#E1E4E8">  averRgba.g </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> imagePixelData[idx </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">  averRgba.b </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> imagePixelData[idx </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 2</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">  averRgba.a </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> imagePixelData[idx </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 3</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">averRgba.r </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">floor</span><span style="color:#E1E4E8">(averRgba.r </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> pixelCount)</span></span>
<span class="line"><span style="color:#E1E4E8">averRgba.g </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">floor</span><span style="color:#E1E4E8">(averRgba.g </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> pixelCount)</span></span>
<span class="line"><span style="color:#E1E4E8">averRgba.b </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">floor</span><span style="color:#E1E4E8">(averRgba.b </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> pixelCount)</span></span>
<span class="line"><span style="color:#E1E4E8">averRgba.a </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">floor</span><span style="color:#E1E4E8">(averRgba.a </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> pixelCount)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// css é¢œè‰²å€¼</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> cssColor</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> `rgba(${</span><span style="color:#E1E4E8">averRgba</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">r</span><span style="color:#9ECBFF">}, ${</span><span style="color:#E1E4E8">averRgba</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">g</span><span style="color:#9ECBFF">}, ${</span><span style="color:#E1E4E8">averRgba</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">b</span><span style="color:#9ECBFF">}, ${</span><span style="color:#E1E4E8">averRgba</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">a</span><span style="color:#F97583"> /</span><span style="color:#79B8FF"> 255</span><span style="color:#9ECBFF">})`</span></span>
<span class="line"></span></code></pre>
<h2 id="å¦‚ä½•è·å–è·¨åŸŸå›¾ç‰‡çš„é¢œè‰²ä¿¡æ¯"><a aria-hidden="true" tabindex="-1" href="#å¦‚ä½•è·å–è·¨åŸŸå›¾ç‰‡çš„é¢œè‰²ä¿¡æ¯"><span class="icon icon-link"></span></a>å¦‚ä½•è·å–è·¨åŸŸå›¾ç‰‡çš„é¢œè‰²ä¿¡æ¯</h2>
<p>ç”±äº<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/CORS_enabled_image" rel="noopener nofollow" target="_blank">æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥</a>, åœ¨ä¸ç»è¿‡ç‰¹æ®Šå¤„ç†æ—¶, canvas æ˜¯æ— æ³•åŠ è½½è·¨åŸŸå›¾ç‰‡èµ„æºçš„. å›¾ç‰‡èµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨å¿…é¡»<a href="https://enable-cors.org/server.html" rel="noopener nofollow" target="_blank">å…è®¸è·¨åŸŸè¯·æ±‚</a>æ–¹å¯è¢« canvas åŠ è½½</p>
<h2 id="ä½¿ç”¨å‰ç«¯æŠ€æœ¯è·å–ç½‘é¡µä¸Šä»»æ„ä½ç½®çš„é¢œè‰²"><a aria-hidden="true" tabindex="-1" href="#ä½¿ç”¨å‰ç«¯æŠ€æœ¯è·å–ç½‘é¡µä¸Šä»»æ„ä½ç½®çš„é¢œè‰²"><span class="icon icon-link"></span></a>ä½¿ç”¨å‰ç«¯æŠ€æœ¯è·å–ç½‘é¡µä¸Šä»»æ„ä½ç½®çš„é¢œè‰²</h2>
<p>æˆ‘æƒ³åˆ°ä¸¤ä¸ªæ€è·¯, ä½†éƒ½ä¸å®Œç¾:</p>
<ol>
<li>ä½¿ç”¨åº“<a href="https://github.com/niklasvh/html2canvas" rel="noopener nofollow" target="_blank">html2canvas</a> å°†ç½‘é¡µè½¬åŒ–ä¸ºç”»å¸ƒ, å†ä½¿ç”¨ä¸Šè¿°æ–¹æ³•å–é¢œè‰²å€¼. ä½†è¿™ä¸ªåº“å¯¹äºå¤æ‚ç½‘é¡µè½¬åŒ–æœ‰é—®é¢˜, ä¼šå‡ºç°è½¬æ¢å‡ºæ¥çš„ç”»å¸ƒæ ·å¼é”™è¯¯, è§†é¢‘æ ‡ç­¾ä¸æ”¯æŒ, å›¾ç‰‡è·¨åŸŸé—®é¢˜ä¹Ÿæ— æ³•è§£å†³</li>
<li>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DocumentOrShadowRoot/elementFromPoint" rel="noopener nofollow" target="_blank"><code>document.elementFromPoint(x, y)</code></a> è·å–åæ ‡å¯¹åº”çš„domå…ƒç´ , åœ¨ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle" rel="noopener nofollow" target="_blank"><code>window.getComputedStyle(element)</code></a> è·å–å…ƒç´ å®é™…æ¸²æŸ“çš„æ ·å¼, å†å–èƒŒæ™¯è‰²æˆ–æ–‡å­—é¢œè‰². è¿™ä¸ªæ–¹æ³•å°±é”™æ›´è¿œäº†: é¦–å…ˆ <code>elementFromPoint</code> å–åˆ°çš„å¯èƒ½æ˜¯é€æ˜è’™å±‚å…ƒç´ ; å†æ¬¡ <code>getComputedStyle</code> æ‹¿åˆ°æ ·å¼åä¹Ÿæ— æ³•ç¡®å®šåº”è¯¥å–æ–‡å­—é¢œè‰²è¿˜æ˜¯èƒŒæ™¯è‰², é‡åˆ°é¢œè‰²æ¸å˜çš„æŸæ‰‹æ— ç­–; æœ€å å¯¹ å›¾ç‰‡ã€è§†é¢‘ã€ç”»å¸ƒç­‰å¤æ‚æ ‡ç­¾åŒæ ·æ— æ³•å¤„ç†</li>
</ol> <div> <span class="mr-2 text-slate-400 text-sm">æ ‡ç­¾ </span> <a class=" bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-300 px-2 py-1 rounded-full" href="/tags/%E9%A2%9C%E8%89%B2/">é¢œè‰²</a><a class=" bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-300 px-2 py-1 rounded-full" href="/tags/%E7%94%BB%E5%B8%83/">ç”»å¸ƒ</a> </div> </article> <div class="px-4 max-w-4xl mx-auto relative"> <div class="relative flex justify-center py-4"><div class="absolute inset-x-0 top-1/2 h-px -translate-y-1/2 bg-transparent bg-gradient-to-r from-transparent via-gray-500 to-transparent opacity-75"></div><span class="relative z-1 bg-white px-6 dark:bg-slate-800">à®“à¹‘âˆ—à¹‘à®“</span></div> <div class="flex justify-between mb-4 max-xs:flex-col max-xs:gap-4"> <div class="max-xs:flex max-xs:justify-between"> <a href="/2021/optimize-search-app-color.html" aria-label="ä¼˜åŒ–æœç´¢ç½‘ç«™çš„é¢œè‰²" class="mr-4 hover-tip">
ä¸Šä¸€ç¯‡
</a> <a href="/2020/05/about-font-and-character.html" aria-label="[çŸ¥è¯†åˆ†äº«]å…³äºå­—ä½“åŠå­—ç¬¦çš„å°æ€è€ƒ" class="hover-tip">
ä¸‹ä¸€ç¯‡
</a> </div> <div class="flex items-center gap-4 relative max-xs:justify-between"> <a href="#" class="hover-tip" aria-label="æ»šåŠ¨åˆ°é¡¶éƒ¨"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-from-line"><path d="m18 9-6-6-6 6"></path><path d="M12 3v14"></path><path d="M5 21h14"></path></svg> </a> <a href="#disqus_thread" class="hover-tip" aria-label="è¯„è®º"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle-more"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path><path d="M8 12h.01"></path><path d="M12 12h.01"></path><path d="M16 12h.01"></path></svg> </a> <a href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fblog.evecalm.com%2F2020%2F06%2Fget-color-from-image%2F" target="_blank" class="hover-tip" aria-label="åˆ†äº«åˆ° Twitter"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg> </a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.evecalm.com%2F2020%2F06%2Fget-color-from-image%2F" target="_blank" class="hover-tip" aria-label="åˆ†äº«åˆ° Facebook"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg> </a> </div> </div> <div id="disqus_thread" data-shortname="kalm" data-url="https://blog.evecalm.com/2020/06/get-color-from-image/" data-identifier="2020/06/get-color-from-image/"> <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> <script type="module">(function(){var t=window.document;function r(){return window.innerHeight+window.scrollY>=t.body.scrollHeight-400}function e(){if(!r()||(document.removeEventListener("scroll",e),window.disqus_config))return;const i=document.getElementById("disqus_thread");window.disqus_config=function(){this.page.url=i.getAttribute("data-url"),this.page.identifier=i.getAttribute("data-identifier")};var n=t.createElement("script");n.src="//"+i.getAttribute("data-shortname")+".disqus.com/embed.js",n.setAttribute("data-timestamp",Date.now()),(t.head||t.body).appendChild(n)}if(r()){e();return}document.addEventListener("scroll",e,{passive:!0})})();</script> </div>  <footer class="text-center text-slate-500 dark:text-slate-300 my-16"> <div>
Copyrights Â© 2025 Saiya. All Rights Reserved
</div> <div> <a href="https://evecalm.com" target="_blank" class="text-slate-500 dark:text-slate-300">å¤å½±</a> &
<a href="https://forth.ink" target="_blank" class="text-slate-500 dark:text-slate-300">ğ—³ğ—¼ğ—¿ğ˜ğ—µğ—¶ğ—»ğ—¸</a> </div> </footer> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-DPSKR82X8Z"></script> <script defer>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-DPSKR82X8Z');
</script> </body></html>  <script type="module">document.body.querySelectorAll("article img").forEach(t=>{const e=t.getAttribute("title")||t.getAttribute("alt");if(!e)return;const r=document.createElement("figure");t.parentNode.replaceChild(r,t),r.appendChild(t),t.insertAdjacentHTML("afterend",`<figcaption class="text-center italic">${e}</figcaption>`)});</script>