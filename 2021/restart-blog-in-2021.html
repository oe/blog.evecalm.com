<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="夏影の博客"><title>博客再次重启及优化 - 夏影の博客</title><meta name="author" content="Saiya"><link rel="icon" href="https://blog.evecalm.com/assets/images/favicon.png"><link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Saiya","sameAs":["https://github.com/oe"],"image":"//evecalm.com/assets/avatar.jpg"},"articleBody":"去年五月我写了一篇博客 博客重启更新, 写完没多久, 工作就开始忙起来, 累成狗. 然后再没过多久, 我又换了一份工作(换工作部分原因也是因为原来工作太累), 来到了一个大厂. 万万没想到的是, 大厂更累, 博客也就再次停更, 一年后的现在身体才慢慢适应过来.\n现在, 我将再次启用博客, 不定期更新内容, 记录自己的日常及学习心得, 锻炼自己的书写能力, 也磨砺自己的思维. 文章将依旧以短文为主, 降低读者阅读时间(毕竟在这个年代, 大家的时间都过于宝贵, 精力也越难以长时间集中), 也减少我写作一篇文章的耗时.\n重启的同时, 我也对本博客进行了优化, 将博客页面核心内容加载大小从原来的几百Kb降低到了不到100Kb. \n博客是基于hexo构建的静态博客, 使用了tranquilpeak主题, 托管在 Github Pages, 同时还使用了 cloudflare 的免费cdn. 以下是几个优化点, 仅供参考:\n\n优化博客引用本地图片文件的方式, 使用了hexo插件hexo-intuitive-image. 该插件由我编写, hexo 自带的 Asset Folders 功能过于局限, 不灵活, 引用图片方式也太符合直觉. 在网上搜索、折腾了好久, 没有达到我的期望, 在阅读了hexo源码后, 我才自己写了这么个插件. 该插件还支持让发布后的博客文章从 cdn &lt;jsdelivr.com&gt; 来加载博客图片.\n为图片增加文字标题, 主题 tranquilpeak 构建出的文章并不会显示图片的标题, 对读者不太友好, 这里就在前端js中做了下手动处理. 效果如下:\n优化了图片素材的大小, 这里使用了谷歌开发的在线工具squoosh来压缩图片. 使用时发现 avif 格式的图片压缩效果惊人, 可以将图片压缩至原图大小的 10% 以内, 图片效果并没有明显变化, 而且比较新的浏览器均已支持. 于是我将网站背景图额外压缩了 avif、webp(压缩率次之)两种格式的图片\n压缩hexo生成出的 html 页面, 这里使用了插件 hexo-html-minifier\n移除不必要的js, 部分公共库从外部cdn加载\n\n博客仓库地址为 https://github.com/oe/blog.evecalm.com, 感兴趣的可以前往观摩.\n","dateCreated":"2021-11-02T14:48:33+00:00","dateModified":"2021-11-06T04:28:48+00:00","datePublished":"2021-11-02T14:48:33+00:00","description":"去年五月我写了一篇博客 博客重启更新, 写完没多久, 工作就开始忙起来, 累成狗. 然后再没过多久, 我又换了一份工作(换工作部分原因也是因为原来工作太累), 来到了一个大厂. 万万没想到的是, 大厂更累, 博客也就再次停更, 一年后的现在身体才慢慢适应过来. 现在, 我将再次启用博客, 不定期更新内容, 记录自己的日常及学习心得, 锻炼自己的书写能力, 也磨砺自己的思维. 文章将依旧以短文为主,...","headline":"博客再次重启及优化","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.evecalm.com/2021/restart-blog-in-2021.html"},"publisher":{"@type":"Organization","name":"Saiya","sameAs":["https://github.com/oe"],"image":"//evecalm.com/assets/avatar.jpg","logo":{"@type":"ImageObject","url":"//evecalm.com/assets/avatar.jpg"}},"url":"https://blog.evecalm.com/2021/restart-blog-in-2021.html","keywords":"博客"}</script><meta name="description" content="去年五月我写了一篇博客 博客重启更新, 写完没多久, 工作就开始忙起来, 累成狗. 然后再没过多久, 我又换了一份工作(换工作部分原因也是因为原来工作太累), 来到了一个大厂. 万万没想到的是, 大厂更累, 博客也就再次停更, 一年后的现在身体才慢慢适应过来. 现在, 我将再次启用博客, 不定期更新内容, 记录自己的日常及学习心得, 锻炼自己的书写能力, 也磨砺自己的思维. 文章将依旧以短文为主,"><meta property="og:type" content="blog"><meta property="og:title" content="博客再次重启及优化"><meta property="og:url" content="https://blog.evecalm.com/2021/restart-blog-in-2021.html"><meta property="og:site_name" content="夏影の博客"><meta property="og:description" content="去年五月我写了一篇博客 博客重启更新, 写完没多久, 工作就开始忙起来, 累成狗. 然后再没过多久, 我又换了一份工作(换工作部分原因也是因为原来工作太累), 来到了一个大厂. 万万没想到的是, 大厂更累, 博客也就再次停更, 一年后的现在身体才慢慢适应过来. 现在, 我将再次启用博客, 不定期更新内容, 记录自己的日常及学习心得, 锻炼自己的书写能力, 也磨砺自己的思维. 文章将依旧以短文为主,"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/oe/blog.evecalm.com@gh-pages/2021/image-assets/1ffb04bd923f030f084da63332bb794a.jpg"><meta property="article:published_time" content="2021-11-02T14:48:33.000Z"><meta property="article:modified_time" content="2021-11-06T04:28:48.013Z"><meta property="article:author" content="Saiya"><meta property="article:tag" content="博客"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/oe/blog.evecalm.com@gh-pages/2021/image-assets/1ffb04bd923f030f084da63332bb794a.jpg"><meta property="og:image" content="//evecalm.com/assets/avatar.jpg"><link rel="stylesheet" href="/assets/css/style-vg4ju1rjp8elhgplnacpzjfcaxpou0ipzfqppjspov8sipaneznzsyovvmbz.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-23144132-1"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-23144132-1');</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.1.1/css/all.min.css" integrity="sha512-ioRJH7yXnyX+7fXTQEKPULWkMn3CqMcapK0NNtCN8q//sW7ZeVFcbMJ9RvX99TwDg6P8rAH2IqUSt2TLab4Xmw==" crossorigin="anonymous" referrerpolicy="no-referrer" media="print" onload="this.media='all'"></head><body><div id="blog"><header id="header" data-behavior="5"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">夏影の博客</a></div><a class="header-right-picture" href="#about" aria-label="打开链接: /#about"><img class="header-picture" src="//evecalm.com/assets/avatar.jpg" alt="作者的图片"></a></header><nav id="sidebar" data-behavior="5"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="阅读有关作者的更多信息"><img class="sidebar-profile-picture" src="//evecalm.com/assets/avatar.jpg" alt="作者的图片"></a><h4 class="sidebar-profile-name">Saiya</h4><h5 class="sidebar-profile-bio"><p>with Sunny</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" rel="noopener" title="首页"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">首页</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/categories" rel="noopener" title="分类"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">分类</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/tags" rel="noopener" title="标签"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">标签</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/archives" rel="noopener" title="归档"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">归档</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://evecalm.com/about/" target="_blank" rel="noopener" title="关于"><i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i> <span class="sidebar-button-desc">关于</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/oe" target="_blank" rel="noopener" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/atom.xml" rel="noopener" title="RSS"><i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i> <span class="sidebar-button-desc">RSS</span></a></li></ul></div></nav><div id="main" data-behavior="5" class="hasCoverMetaIn"><article class="post"><div class="post-header main-content-wrap text-left"><h1 class="post-title">博客再次重启及优化</h1><div class="post-meta"><time datetime="2021-11-02T14:48:33+00:00">11月 02, 2021 </time><span>发布在 </span><a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></div></div><div class="post-content markdown"><div class="main-content-wrap"><p>去年五月我写了一篇博客 <a href="/2020/05/restart-to-blog.html">博客重启更新</a>, 写完没多久, 工作就开始忙起来, 累成狗. 然后再没过多久, 我又换了一份工作(换工作部分原因也是因为原来工作太累), 来到了一个大厂. 万万没想到的是, 大厂更累, 博客也就再次停更, 一年后的现在身体才慢慢适应过来.</p><p>现在, 我将再次启用博客, 不定期更新内容, 记录自己的日常及学习心得, 锻炼自己的书写能力, 也磨砺自己的思维. 文章将依旧以短文为主, 降低读者阅读时间(毕竟在这个年代, 大家的时间都过于宝贵, 精力也越难以长时间集中), 也减少我写作一篇文章的耗时.</p><p>重启的同时, 我也对本博客进行了优化, 将博客页面核心内容加载大小从原来的几百Kb降低到了不到100Kb.</p><p>博客是基于<a target="_blank" rel="noopener" href="https://hexo.io/">hexo</a>构建的静态博客, 使用了<a target="_blank" rel="noopener" href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak/">tranquilpeak</a>主题, 托管在 Github Pages, 同时还使用了 cloudflare 的免费cdn. 以下是几个优化点, 仅供参考:</p><ol><li>优化博客引用本地图片文件的方式, 使用了hexo插件<a target="_blank" rel="noopener" href="https://github.com/oe/hexo-intuitive-image">hexo-intuitive-image</a>. 该插件由我编写, hexo 自带的 <a target="_blank" rel="noopener" href="https://hexo.io/docs/asset-folders">Asset Folders</a> 功能过于局限, 不灵活, 引用图片方式也太符合直觉. 在网上搜索、折腾了好久, 没有达到我的期望, 在阅读了hexo源码后, 我才自己写了这么个插件. 该插件还支持让发布后的博客文章从 cdn &lt;jsdelivr.com&gt; 来加载博客图片.</li><li>为图片增加文字标题, 主题 tranquilpeak 构建出的文章并不会显示图片的标题, 对读者不太友好, 这里就在前端js中做了下<a target="_blank" rel="noopener" href="https://github.com/oe/blog.evecalm.com/blob/65d6d65f4c/themes/tranquilpeak/source/_js/fancybox.js#L35-L49">手动处理</a>. 效果如下:<br><img src="https://cdn.jsdelivr.net/gh/oe/blog.evecalm.com@gh-pages/2021/image-assets/1ffb04bd923f030f084da63332bb794a.jpg" alt="带标题的图片"></li><li>优化了图片素材的大小, 这里使用了谷歌开发的在线工具<a target="_blank" rel="noopener" href="https://squoosh.app/">squoosh</a>来压缩图片. 使用时发现 <code>avif</code> 格式的图片压缩效果惊人, 可以将图片压缩至原图大小的 10% 以内, 图片效果并没有明显变化, 而且比较新的浏览器<a target="_blank" rel="noopener" href="https://caniuse.com/?search=avif">均已支持</a>. 于是我将网站背景图额外压缩了 <code>avif</code>、<code>webp</code>(压缩率次之)两种格式的图片</li><li>压缩hexo生成出的 html 页面, 这里使用了插件 <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-html-minifier">hexo-html-minifier</a></li><li>移除不必要的js, 部分公共库从外部cdn加载</li></ol><p>博客仓库地址为 <a target="_blank" rel="noopener" href="https://github.com/oe/blog.evecalm.com">https://github.com/oe/blog.evecalm.com</a>, 感兴趣的可以前往观摩.</p></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">标签</span><br><a class="tag tag--primary tag--small t-none-link" href="/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">博客</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--disabled" aria-hidden="true"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2021/optimize-search-app-color.html" data-tooltip="优化搜索网站的颜色" aria-label="下一篇: 优化搜索网站的颜色"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Facebook" aria-label="分享到 Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Weibo" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.evecalm.com/2021/restart-blog-in-2021.html&amp;title=博客再次重启及优化" title="分享到 QQ" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Qzone" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Kommentieren"><i class="fa fa-comment"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></article><footer id="footer" class="main-content-wrap"><span class="copyrights">Copyrights &copy; 2021 Saiya. All Rights Reserved.</span></footer></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="5"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--disabled" aria-hidden="true"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/2021/optimize-search-app-color.html" data-tooltip="优化搜索网站的颜色" aria-label="下一篇: 优化搜索网站的颜色"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Facebook" aria-label="分享到 Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Weibo" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.evecalm.com/2021/restart-blog-in-2021.html&amp;title=博客再次重启及优化" title="分享到 QQ" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.evecalm.com/2021/restart-blog-in-2021.html" title="分享到 Qzone" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Kommentieren"><i class="fa fa-comment"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div><div id="share-options-bar" class="share-options-bar" data-behavior="5"><i id="btn-close-shareoptions" class="fa fa-times"></i><ul class="share-options"><li class="share-option"><a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.evecalm.com/2021/restart-blog-in-2021.html" aria-label="分享到 Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://blog.evecalm.com/2021/restart-blog-in-2021.html" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://blog.evecalm.com/2021/restart-blog-in-2021.html" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.evecalm.com/2021/restart-blog-in-2021.html&amp;title=博客再次重启及优化" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.evecalm.com/2021/restart-blog-in-2021.html" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i><span>分享到 Qzone</span></a></li></ul></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="//evecalm.com/assets/avatar.jpg" alt="作者的图片"><h4 id="about-card-name">Saiya</h4><div id="about-card-bio"><p>with Sunny</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>author.job</p></div></div></div><picture id="cover"><source srcset="/assets/images/cover.avif" type="image/avif"><source srcset="/assets/images/cover.webp" type="image/webp"><img src="/assets/images/cover.jpg" alt="Alt Text!" style="width: inherit;height: inherit;object-fit: cover;"></picture><script src="/assets/js/script-tvbacjuuoz8vsqxtnvlsyafyq7ubmqtan4hh5ggqqbxvxg02t0uqwgx5uopv.min.js"></script><script>var disqus_config = function() {
            this.page.url = 'https://blog.evecalm.com/2021/restart-blog-in-2021.html';
              
            this.page.identifier = '2021/restart-blog-in-2021.html';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'kalm';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();</script></body></html>